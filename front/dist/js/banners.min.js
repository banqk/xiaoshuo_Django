function Banners(){}Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),myajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){var n=e.find(".close-btn"),a=null;n.click(function(){(a=e.attr("data-banner-id"))?xfzalert.alertConfirm({text:"确定要删除该轮播图吗？",confirmCallback:function(){myajax.post({url:"/cms/delete_banner/",data:{banner_id:a},success:function(n){200===n.code?(xfzalert.alertSuccess("删除成功"),e.remove()):xfzalert.alertError("删除失败")}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),c=t.find("span[class='priority']"),s=t.attr("data-banner-id"),d="";d=s?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var e=i.val(),n=o.val(),a=r.attr("src");myajax.post({url:d,data:{priority:e,image_url:a,link_to:n,pk:s},success:function(n){200===n.code&&(s?window.messageBox.showSuccess("缩略图修改成功"):(s=n.data.banner_id,t.attr("data-banner-id",s),window.messageBox.showSuccess("缩略图添加成功")),c.text("优先级："+e))}})})},Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.listenAddBannerEvent=function(){var n=this,e=$("#add-banner-btn"),a=$(".banner-list-group");e.click(function(){6<=a.children().length?window.messageBox.showInfo("轮播图最多不能超过6张！"):n.createBannerItem()})},Banners.prototype.loadData=function(){var r=this;myajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}})},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsInJ1biIsInRoaXMiLCJsaXN0ZW5BZGRCYW5uZXJFdmVudCIsImxvYWREYXRhIiwiYWRkSW1hZ2VTZWxlY3RFdmVudCIsImJhbm5lckl0ZW0iLCJpbWFnZSIsImZpbmQiLCJpbWFnZUlucHV0IiwiY2xpY2siLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwibXlhamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsImF0dHIiLCJhZGRSZW1vdmVCYW5uZXJFdmVudCIsImNsb3NlQnRuIiwiYmFubmVySWQiLCJ4ZnphbGVydCIsImFsZXJ0Q29uZmlybSIsInRleHQiLCJjb25maXJtQ2FsbGJhY2siLCJiYW5uZXJfaWQiLCJhbGVydFN1Y2Nlc3MiLCJyZW1vdmUiLCJhbGVydEVycm9yIiwiYWRkU2F2ZUJhbm5lckV2ZW50Iiwic2F2ZUJ0biIsInByaW9yaXR5SW5wdXQiLCJsaW5rVG9JbnB1dCIsInByaW9yaXR5U3BhbiIsInByaW9yaXR5IiwidmFsIiwibGlua1RvIiwiaW1hZ2VVcmwiLCJpbWFnZV91cmwiLCJsaW5rX3RvIiwicGsiLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJjcmVhdGVCYW5uZXJJdGVtIiwiYmFubmVyIiwic2VsZiIsImh0bWwiLCJ0ZW1wbGF0ZSIsImJhbm5lckxpc3RHcm91cCIsIiQiLCJwcmVwZW5kIiwiYWRkQmFubmVyQnRuIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJzaG93SW5mbyIsImdldCIsImJhbm5lcnMiLCJpIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxXQUlUQSxRQUFRQyxVQUFVQyxJQUFNLFdBQ3BCQyxLQUFLQyx1QkFDTEQsS0FBS0UsWUFLVEwsUUFBUUMsVUFBVUssb0JBQXNCLFNBQVND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QUFhLEtBRVosSUFEQSxJQUFJeUMsRUFBVXpDLEVBQWEsS0FDbkIwQyxFQUFFLEVBQUVBLEVBQUVELEVBQVFILE9BQU9JLElBQUksQ0FDN0IsSUFBSWIsRUFBU1ksRUFBUUMsR0FDckJaLEVBQUtGLGlCQUFpQkMsUUFPMUNLLEVBQUUsWUFDZ0IsSUFBSTNELFNBQ1ZFIiwiZmlsZSI6ImJhbm5lcnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gQmFubmVycygpe1xyXG5cclxufVxyXG5cclxuQmFubmVycy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMubGlzdGVuQWRkQmFubmVyRXZlbnQoKTtcclxuICAgIHRoaXMubG9hZERhdGEoKTtcclxufTtcclxuXHJcblxyXG4vLyDmt7vliqDlm77niYfkuovku7ZcclxuQmFubmVycy5wcm90b3R5cGUuYWRkSW1hZ2VTZWxlY3RFdmVudCA9IGZ1bmN0aW9uKGJhbm5lckl0ZW0pe1xyXG4gICAgdmFyIGltYWdlID0gYmFubmVySXRlbS5maW5kKCcudGh1bWJuYWlsJyk7XHJcbiAgICB2YXIgaW1hZ2VJbnB1dCA9IGJhbm5lckl0ZW0uZmluZCgnLmltYWdlLWlucHV0Jyk7XHJcbiAgICBpbWFnZS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgIGltYWdlSW5wdXQuY2xpY2soKTtcclxuICAgIH0pO1xyXG4gICAgaW1hZ2VJbnB1dC5jaGFuZ2UoZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJyxmaWxlKTtcclxuICAgICAgICBteWFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6Zm9ybURhdGEsXHJcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyDnm5HlkKzlhbPpl63kuovku7ZcclxuQmFubmVycy5wcm90b3R5cGUuYWRkUmVtb3ZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcclxuICAgIHZhciBjbG9zZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgdmFyIGJhbm5lcklkID0gbnVsbDtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgYmFubmVySWQgPSBiYW5uZXJJdGVtLmF0dHIoJ2RhdGEtYmFubmVyLWlkJyk7XHJcbiAgICAgICAgaWYoYmFubmVySWQpe1xyXG4gICAgICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgJ3RleHQnOiAn56Gu5a6a6KaB5Yig6Zmk6K+l6L2u5pKt5Zu+5ZCX77yfJyxcclxuICAgICAgICAgICAgICAgICdjb25maXJtQ2FsbGJhY2snOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIG15YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICcvY21zL2RlbGV0ZV9iYW5uZXIvJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFubmVyX2lkJzogYmFubmVySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydEVycm9yKCfliKDpmaTlpLHotKUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuLy8g55uR5ZCs5L+d5a2Y5LqL5Lu2XHJcbkJhbm5lcnMucHJvdG90eXBlLmFkZFNhdmVCYW5uZXJFdmVudCA9IGZ1bmN0aW9uKGJhbm5lckl0ZW0pe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNhdmVCdG4gPSBiYW5uZXJJdGVtLmZpbmQoJy5zYXZlLWJ0bicpO1xyXG4gICAgdmFyIGltYWdlID0gYmFubmVySXRlbS5maW5kKCcudGh1bWJuYWlsJyk7XHJcbiAgICB2YXIgcHJpb3JpdHlJbnB1dCA9IGJhbm5lckl0ZW0uZmluZChcImlucHV0W25hbWU9J3ByaW9yaXR5J11cIik7XHJcbiAgICB2YXIgbGlua1RvSW5wdXQgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rX3RvJ11cIik7XHJcbiAgICB2YXIgcHJpb3JpdHlTcGFuID0gYmFubmVySXRlbS5maW5kKFwic3BhbltjbGFzcz0ncHJpb3JpdHknXVwiKTtcclxuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnKTtcclxuICAgIHZhciB1cmwgPSBcIlwiO1xyXG4gICAgaWYoYmFubmVySWQpe1xyXG4gICAgICAgIHVybCA9ICcvY21zL2VkaXRfYmFubmVyLyc7XHJcbiAgICB9IGVsc2V7XHJcbiAgICAgICAgdXJsID0gJy9jbXMvYWRkX2Jhbm5lci8nO1xyXG4gICAgfVxyXG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXR5SW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIGxpbmtUbyA9IGxpbmtUb0lucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBpbWFnZVVybCA9IGltYWdlLmF0dHIoJ3NyYycpO1xyXG4gICAgICAgIG15YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncHJpb3JpdHknOiBwcmlvcml0eSxcclxuICAgICAgICAgICAgICAgICdpbWFnZV91cmwnOiBpbWFnZVVybCxcclxuICAgICAgICAgICAgICAgICdsaW5rX3RvJzogbGlua1RvLFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogYmFubmVySWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbihyZXN1bHQpe1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYmFubmVySWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn57yp55Wl5Zu+5L+u5pS55oiQ5YqfJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJZCA9IHJlc3VsdFsnZGF0YSddWydiYW5uZXJfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcsYmFubmVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn57yp55Wl5Zu+5re75Yqg5oiQ5YqfJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KCfkvJjlhYjnuqfvvJonK3ByaW9yaXR5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8gSFRNTOWKoOWFpei9ruaSreWbvuahhuaetmJveFxyXG5CYW5uZXJzLnByb3RvdHlwZS5jcmVhdGVCYW5uZXJJdGVtID0gZnVuY3Rpb24oYmFubmVyKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBodG1sID0gdGVtcGxhdGUoJ2Jhbm5lci1pdGVtJyx7J2Jhbm5lcic6YmFubmVyfSk7XHJcbiAgICB2YXIgYmFubmVyTGlzdEdyb3VwID0gJCgnLmJhbm5lci1saXN0LWdyb3VwJyk7XHJcbiAgICB2YXIgYmFubmVySXRlbSA9IG51bGw7XHJcbiAgICBpZihiYW5uZXIpe1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5hcHBlbmQoaHRtbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKCcuYmFubmVyLWl0ZW06bGFzdCcpO1xyXG4gICAgfSBlbHNle1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5wcmVwZW5kKGh0bWwpO1xyXG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZCgnLmJhbm5lci1pdGVtOmZpcnN0Jyk7XHJcbiAgICB9XHJcbiAgICBzZWxmLmFkZEltYWdlU2VsZWN0RXZlbnQoYmFubmVySXRlbSk7XHJcbiAgICBzZWxmLmFkZFJlbW92ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgc2VsZi5hZGRTYXZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XHJcbn07XHJcblxyXG4vLyDnm5HlkKzmt7vliqDova7mkq3lm77kuovku7ZcclxuQmFubmVycy5wcm90b3R5cGUubGlzdGVuQWRkQmFubmVyRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGFkZEJhbm5lckJ0biA9ICQoJyNhZGQtYmFubmVyLWJ0bicpO1xyXG4gICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xyXG4gICAgYWRkQmFubmVyQnRuLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IGJhbm5lckxpc3RHcm91cC5jaGlsZHJlbigpLmxlbmd0aDtcclxuICAgICAgICBpZihsZW5ndGggPj0gNil7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKCfova7mkq3lm77mnIDlpJrkuI3og73otoXov4c25byg77yBJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5jcmVhdGVCYW5uZXJJdGVtKCk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8g5byC5q2l5Yqg6L295pWw5o2uXHJcbkJhbm5lcnMucHJvdG90eXBlLmxvYWREYXRhID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIG15YWpheC5nZXQoe1xyXG4gICAgICAgICd1cmwnOiAnL2Ntcy9iYW5uZXJfbGlzdC8nLFxyXG4gICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFubmVycyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxiYW5uZXJzLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXIgPSBiYW5uZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbShiYW5uZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufTtcclxuXHJcbiQoZnVuY3Rpb24oKXtcclxuICAgIHZhciBiYW5uZXJzID0gbmV3IEJhbm5lcnMoKTtcclxuICAgIGJhbm5lcnMucnVuKCk7XHJcbn0pOyJdfQ==
