function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper"),this.SmsCaptchaBtn=$(".sms-captcha-btn"),this.imgCaptcha=$(".img-captcha")}Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信验证码发送成功"),t.SmsCaptchaBtn.unbind("click"),t.SmsCaptchaBtn.addClass("disabled");var n=60,e=setInterval(function(){t.SmsCaptchaBtn.text("已发送("+n+"s)"),--n<=0&&(clearInterval(e),t.SmsCaptchaBtn.text("发送验证码"),t.SmsCaptchaBtn.removeClass("disabled"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenShowHideEvent=function(){var t=this;t.signIn=$(".sign-in"),t.signUp=$(".sign-up");var n=$(".close-btn");t.signIn.click(function(){t.scrollWrapper.css({left:"0px"}),t.showEvent()}),t.signUp.click(function(){t.scrollWrapper.css({left:"-400px"}),t.imgCaptchaRefresh(),t.showEvent()}),n.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):(n.imgCaptchaRefresh(),n.scrollWrapper.animate({left:"-400px"}))})},Auth.prototype.listenSignInEvent=function(){var a=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),i=t.find("input[name='password']"),o=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=i.val(),e=o.prop("checked");myajax.post({url:"/xsauth/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){if(200===t.code)if(a.hideEvent(),a.hasOwnProperty("next")){var n=a.next,e=window.location.protocol+"//"+window.location.host;window.location.href=e+n,console.log(e+n)}else window.location.reload()}})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=this;t.imgCaptcha.click(function(){t.imgCaptchaRefresh()})},Auth.prototype.imgCaptchaRefresh=function(){this.imgCaptcha.attr("src","/xsauth/img_captcha/?random="+Math.random())},Auth.prototype.listenSmsCaptchaEvent=function(){var e=this,n=$(".signup-group input[name='telephone']"),a=$(".signup-group input[name='sms_captcha']");e.SmsCaptchaBtn.click(function(){var t=n.val();t?myajax.get({url:"/xsauth/sms_captcha/",data:{telephone:t},success:function(t){if(200===t.code){e.smsSuccessEvent();var n=t.data.code;a.val(n),console.log(n)}},fail:function(t){console.log(t)}}):messageBox.showInfo("请输入手机号码")})},Auth.prototype.listenSignUpEvent=function(){var t=$(".signup-group"),o=t.find("input[name='telephone']"),c=t.find("input[name='username']"),p=t.find("input[name='img_captcha']"),r=t.find("input[name='password1']"),h=t.find("input[name='password2']"),l=t.find("input[name='sms_captcha']");t.find(".submit-btn").click(function(){var t=o.val(),n=c.val(),e=p.val(),a=r.val(),s=h.val(),i=l.val();myajax.post({url:"/xsauth/register/",data:{telephone:t,username:n,img_captcha:e,password1:a,password2:s,sms_captcha:i},success:function(t){200===t.code&&window.location.reload()}})})},Auth.prototype.needAuth=function(){console.log(111);var t=function(){var t=location.search.substring(1).split("&");console.log(t);for(var n={},e=0,a=t.length;e<a;e++){var s=t[e].indexOf("=");if(-1!=s){var i=t[e].substring(0,s),o=t[e].substring(s+1);n[i]=unescape(o),console.log(n[i])}}return n}();t.hasOwnProperty("next")&&(this.next=t.next,this.signIn.trigger("click"))},Auth.prototype.run=function(){this.listenShowHideEvent(),this.listenSwitchEvent(),this.listenSignInEvent(),this.listenImgCaptchaEvent(),this.listenSmsCaptchaEvent(),this.listenSignUpEvent(),this.needAuth()},$(function(){(new Auth).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwiU21zQ2FwdGNoYUJ0biIsImltZ0NhcHRjaGEiLCJwcm90b3R5cGUiLCJzaG93RXZlbnQiLCJzaG93IiwiaGlkZUV2ZW50IiwiaGlkZSIsInNtc1N1Y2Nlc3NFdmVudCIsInNlbGYiLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJ1bmJpbmQiLCJhZGRDbGFzcyIsImNvdW50IiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInRleHQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQ2xhc3MiLCJsaXN0ZW5TbXNDYXB0Y2hhRXZlbnQiLCJsaXN0ZW5TaG93SGlkZUV2ZW50Iiwic2lnbkluIiwic2lnblVwIiwiY2xvc2VCdG4iLCJjbGljayIsImNzcyIsImxlZnQiLCJpbWdDYXB0Y2hhUmVmcmVzaCIsImxpc3RlblN3aXRjaEV2ZW50IiwiY3VycmVudExlZnQiLCJwYXJzZUludCIsImFuaW1hdGUiLCJsaXN0ZW5TaWduSW5FdmVudCIsInNpZ25Jbkdyb3VwIiwidGVsZXBob25lSW5wdXQiLCJmaW5kIiwicGFzc3dvcmRJbnB1dCIsInJlbWVtYmVySW5wdXQiLCJ0ZWxlcGhvbmUiLCJ2YWwiLCJwYXNzd29yZCIsInJlbWVtYmVyIiwicHJvcCIsIm15YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsImhhc093blByb3BlcnR5IiwibmV4dCIsImRvbWFpbiIsIndpbmRvdyIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiaHJlZiIsImNvbnNvbGUiLCJsb2ciLCJyZWxvYWQiLCJsaXN0ZW5JbWdDYXB0Y2hhRXZlbnQiLCJhdHRyIiwiTWF0aCIsInJhbmRvbSIsImlucHV0VGVsZXBob25lIiwiaW5wdXRTbXNDb2RlIiwiZ2V0IiwiY29kZSIsImZhaWwiLCJlcnJvciIsInNob3dJbmZvIiwibGlzdGVuU2lnblVwRXZlbnQiLCJzaWduVXBHcm91cCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIiwibmVlZEF1dGgiLCJxcyIsImEiLCJzZWFyY2giLCJzdWJzdHJpbmciLCJzcGxpdCIsIm8iLCJpIiwibGVuIiwibGVuZ3RoIiwibiIsImluZGV4T2YiLCJ2MSIsInYyIiwidW5lc2NhcGUiLCJxdWVyeVN0cmluZyIsInRyaWdnZXIiLCJydW4iXSwibWFwcGluZ3MiOiJBQUNBLFNBQVNBLE9BQ0xDLEtBQUtDLFlBQWNDLEVBQUUsaUJBQ3JCRixLQUFLRyxjQUFnQkQsRUFBRSxtQkFDdkJGLEtBQUtJLGNBQWdCRixFQUFFLG9CQUN2QkYsS0FBS0ssV0FBYUgsRUFBRSxnQkFJeEJILEtBQUtPLFVBQVVDLFVBQVksV0FDdkJQLEtBQUtDLFlBQVlPLFFBSXJCVCxLQUFLTyxVQUFVRyxVQUFZLFdBQ3ZCVCxLQUFLQyxZQUFZUyxRQUlyQlgsS0FBS08sVUFBVUssZ0JBQWtCLFdBQzdCLElBQUlDLEVBQU9aLEtBQ1hhLFdBQVdDLFlBQVksYUFDdkJGLEVBQUtSLGNBQWNXLE9BQU8sU0FDMUJILEVBQUtSLGNBQWNZLFNBQVMsWUFDNUIsSUFBSUMsRUFBUSxHQUVSQyxFQUFRQyxZQUFZLFdBQ3BCUCxFQUFLUixjQUFjZ0IsS0FBSyxPQUFPSCxFQUFNLFFBQ3JDQSxHQUNVLElBQ05JLGNBQWNILEdBQ2ROLEVBQUtSLGNBQWNnQixLQUFLLFNBQ3hCUixFQUFLUixjQUFja0IsWUFBWSxZQUMvQlYsRUFBS1csMEJBRVgsTUFJTnhCLEtBQUtPLFVBQVVrQixvQkFBc0IsV0FDakMsSUFBSVosRUFBT1osS0FDWFksRUFBS2EsT0FBU3ZCLEVBQUUsWUFDaEJVLEVBQUtjLE9BQVN4QixFQUFFLFlBQ2hCLElBQUl5QixFQUFX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RSxZQUNhLElBQUlILE1BQ1Z5RyIsImZpbGUiOiJhdXRoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIOeUqOadpeWkhOeQhueZu+W9leWSjOazqOWGjFxyXG5mdW5jdGlvbiBBdXRoKCl7XHJcbiAgICB0aGlzLm1hc2tXcmFwcGVyID0gJCgnLm1hc2std3JhcHBlcicpO1xyXG4gICAgdGhpcy5zY3JvbGxXcmFwcGVyID0gJCgnLnNjcm9sbC13cmFwcGVyJyk7XHJcbiAgICB0aGlzLlNtc0NhcHRjaGFCdG4gPSAkKCcuc21zLWNhcHRjaGEtYnRuJyk7XHJcbiAgICB0aGlzLmltZ0NhcHRjaGEgPSAkKFwiLmltZy1jYXB0Y2hhXCIpO1xyXG59XHJcblxyXG4vLyDmmL7npLrmqKHmgIHlr7nor53moYZcclxuQXV0aC5wcm90b3R5cGUuc2hvd0V2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMubWFza1dyYXBwZXIuc2hvdygpXHJcbn07XHJcblxyXG4vLyDpmpDol4/mqKHmgIHlr7nor53moYZcclxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMubWFza1dyYXBwZXIuaGlkZSgpXHJcbn07XHJcblxyXG4vLyDnn63kv6Hpqozor4HnoIHlj5HpgIHmiJDlip9cclxuQXV0aC5wcm90b3R5cGUuc21zU3VjY2Vzc0V2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgbWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIuefreS/oemqjOivgeeggeWPkemAgeaIkOWKn1wiKVxyXG4gICAgc2VsZi5TbXNDYXB0Y2hhQnRuLnVuYmluZCgnY2xpY2snKVxyXG4gICAgc2VsZi5TbXNDYXB0Y2hhQnRuLmFkZENsYXNzKCdkaXNhYmxlZCcpXHJcbiAgICB2YXIgY291bnQgPSA2MFxyXG4gICAgLy8g5re75Yqg5a6a5pe25Zmo77yM5q+P56eS5omn6KGM5LiA5qyh77yMNjDnp5LlkI7nu4jmraJcclxuICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgc2VsZi5TbXNDYXB0Y2hhQnRuLnRleHQoJ+W3suWPkemAgSgnK2NvdW50KydzKScpXHJcbiAgICAgICAgY291bnQtLVxyXG4gICAgICAgIGlmKGNvdW50PD0wKXtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcilcclxuICAgICAgICAgICAgc2VsZi5TbXNDYXB0Y2hhQnRuLnRleHQoJ+WPkemAgemqjOivgeeggScpXHJcbiAgICAgICAgICAgIHNlbGYuU21zQ2FwdGNoYUJ0bi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKVxyXG4gICAgICAgICAgICBzZWxmLmxpc3RlblNtc0NhcHRjaGFFdmVudCgpXHJcbiAgICAgICAgfVxyXG4gICAgfSwxMDAwKVxyXG59O1xyXG5cclxuLy8g55uR5ZCs5qih5oCB5a+56K+d5qGG5pi+56S65LiO6ZqQ6JeP5LqL5Lu2XHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzXHJcbiAgICBzZWxmLnNpZ25JbiA9ICQoJy5zaWduLWluJylcclxuICAgIHNlbGYuc2lnblVwID0gJCgnLnNpZ24tdXAnKVxyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpXHJcbiAgICBzZWxmLnNpZ25Jbi5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoeydsZWZ0JzonMHB4J30pXHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKVxyXG4gICAgfSlcclxuICAgIHNlbGYuc2lnblVwLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7J2xlZnQnOictNDAwcHgnfSk7XHJcbiAgICAgICAgc2VsZi5pbWdDYXB0Y2hhUmVmcmVzaCgpO1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICB9KVxyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICBzZWxmLmhpZGVFdmVudCgpXHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8g55uR5ZCs5qih5oCB5a+56K+d5qGG5YiH5o2i5LqL5Lu2XHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblN3aXRjaEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgdmFyIHN3aXRjaGVyID0gJCgnLnN3aXRjaCcpXHJcblxyXG4gICAgc3dpdGNoZXIuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgY3VycmVudExlZnQgPSBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKCdsZWZ0JylcclxuICAgICAgICBjdXJyZW50TGVmdCA9IHBhcnNlSW50KGN1cnJlbnRMZWZ0KVxyXG4gICAgICAgIGlmKGN1cnJlbnRMZWZ0IDwgMCl7XHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHsnbGVmdCc6JzAnfSlcclxuICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW1nQ2FwdGNoYVJlZnJlc2goKTtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoeydsZWZ0JzonLTQwMHB4J30pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufTtcclxuXHJcbi8vIOebkeWQrOeZu+W9leS6i+S7tlxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduSW5FdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgIHZhciBzaWduSW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKVxyXG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnbkluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpXHJcbiAgICB2YXIgcGFzc3dvcmRJbnB1dCA9IHNpZ25Jbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZCddXCIpXHJcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25Jbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpXHJcblxyXG4gICAgdmFyIHNpZ25JbkJ0biA9IHNpZ25Jbkdyb3VwLmZpbmQoJy5zdWJtaXQtYnRuJyk7XHJcbiAgICBzaWduSW5CdG4uY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKClcclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpXHJcbiAgICAgICAgLy8g6I635Y+W5aSN6YCJ5qGG5piv5ZCm5Yu+6YCJICBUcnVlL0ZhbHNlXHJcbiAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJJbnB1dC5wcm9wKFwiY2hlY2tlZFwiKVxyXG4gICAgICAgIG15YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcveHNhdXRoL2xvZ2luLycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHBhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgJ3JlbWVtYmVyJzogcmVtZW1iZXI/MTowLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyDpmpDol4/mqKHmgIHmoYZcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWIt+aWsOmhtemdolxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihzZWxmLmhhc093blByb3BlcnR5KCduZXh0Jykpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IHNlbGYubmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sOyAgICAgLy8g6K+35rGC5Y2P6K6uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBob3N0ID0gd2luZG93LmxvY2F0aW9uLmhvc3Q7ICAgICAgICAgICAgLy8g5Li75py65ZCNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb21haW4gPSBwcm90b2NvbCArICcvLycgKyBob3N0OyAgICAgICAgIC8vIOWfn+WQjVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGRvbWFpbiArIG5leHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZG9tYWluICsgbmV4dClcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8g6I635Y+W5Zu+5b2i6aqM6K+B56CBXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmltZ0NhcHRjaGEuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAvLyDlm77niYflnLDlnYDmlLnlj5jlm77niYflsLHkvJrmm7TmlrBcclxuICAgICAgICBzZWxmLmltZ0NhcHRjaGFSZWZyZXNoKCk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8g5Yi35paw5Zu+5b2i6aqM6K+B56CBXHJcbkF1dGgucHJvdG90eXBlLmltZ0NhcHRjaGFSZWZyZXNoID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMuaW1nQ2FwdGNoYS5hdHRyKCdzcmMnLCcveHNhdXRoL2ltZ19jYXB0Y2hhLycrJz9yYW5kb209JytNYXRoLnJhbmRvbSgpKVxyXG59O1xyXG5cclxuLy8g55uR5ZCs5Y+R6YCB55+t5L+h6aqM6K+B56CBXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNtc0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgIHZhciBpbnB1dFRlbGVwaG9uZSA9ICQoXCIuc2lnbnVwLWdyb3VwIGlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgdmFyIGlucHV0U21zQ29kZSA9ICQoXCIuc2lnbnVwLWdyb3VwIGlucHV0W25hbWU9J3Ntc19jYXB0Y2hhJ11cIik7XHJcbiAgICBzZWxmLlNtc0NhcHRjaGFCdG4uY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gaW5wdXRUZWxlcGhvbmUudmFsKClcclxuICAgICAgICBpZighdGVsZXBob25lKXtcclxuICAgICAgICAgICAgbWVzc2FnZUJveC5zaG93SW5mbyhcIuivt+i+k+WFpeaJi+acuuWPt+eggVwiKVxyXG4gICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgbXlhamF4LmdldCh7XHJcbiAgICAgICAgICAgICAgICAndXJsJzogJy94c2F1dGgvc21zX2NhcHRjaGEvJyxcclxuICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0W1wiY29kZVwiXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zbXNTdWNjZXNzRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGUgPSByZXN1bHRbJ2RhdGEnXVsnY29kZSddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFNtc0NvZGUudmFsKGNvZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJ2ZhaWwnOiBmdW5jdGlvbihlcnJvcil7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufTtcclxuXHJcbi8vIOebkeWQrOazqOWGjOS6i+S7tlxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduVXBFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2lnblVwR3JvdXAgPSAkKCcuc2lnbnVwLWdyb3VwJylcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ25VcEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKVxyXG4gICAgdmFyIHVzZXJuYW1lSW5wdXQgPSBzaWduVXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndXNlcm5hbWUnXVwiKVxyXG4gICAgdmFyIGltZ0NhcHRjaGFJbnB1dCA9IHNpZ25VcEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdpbWdfY2FwdGNoYSddXCIpXHJcbiAgICB2YXIgcGFzc3dvcmQxSW5wdXQgPSBzaWduVXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIilcclxuICAgIHZhciBwYXNzd29yZDJJbnB1dCA9IHNpZ25VcEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDInXVwiKVxyXG4gICAgdmFyIHNtc0NhcHRjaGFJbnB1dCA9IHNpZ25VcEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdzbXNfY2FwdGNoYSddXCIpXHJcblxyXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ25VcEdyb3VwLmZpbmQoXCIuc3VibWl0LWJ0blwiKVxyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpXHJcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKVxyXG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKVxyXG4gICAgICAgIHZhciBwYXNzd29yZDEgPSBwYXNzd29yZDFJbnB1dC52YWwoKVxyXG4gICAgICAgIHZhciBwYXNzd29yZDIgPSBwYXNzd29yZDJJbnB1dC52YWwoKVxyXG4gICAgICAgIHZhciBzbXNfY2FwdGNoYSA9IHNtc0NhcHRjaGFJbnB1dC52YWwoKVxyXG5cclxuICAgICAgICBteWFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL3hzYXV0aC9yZWdpc3Rlci8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAndXNlcm5hbWUnOiB1c2VybmFtZSxcclxuICAgICAgICAgICAgICAgICdpbWdfY2FwdGNoYSc6IGltZ19jYXB0Y2hhLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMSc6IHBhc3N3b3JkMSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZDInOiBwYXNzd29yZDIsXHJcbiAgICAgICAgICAgICAgICAnc21zX2NhcHRjaGEnOiBzbXNfY2FwdGNoYVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8g5qC55o2u5p+l6K+i5a2X56ym5Liy5Yik5pat5piv5ZCm6ZyA6KaB5by55Ye655m75b2V5qGGICDor6Xmlrnms5XpnIDopoHlnKjigJznm5HlkKzmqKHmgIHlr7nor53moYbmmL7npLrkuI7pmpDol4/kuovku7bigJ3kuYvlkI5cclxuQXV0aC5wcm90b3R5cGUubmVlZEF1dGggPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgY29uc29sZS5sb2coMTExKTtcclxuICAgIC8v6I635Y+WVVJM5p+l6K+i5a2X56ym5Liy5Y+C5pWw5YC877yM5Y+v5Lul5oq95Y+W5q+P5Liq5Y+C5pWw5ZKM5Y+C5pWw5YC8XHJcbiAgICB2YXIgcXVlcnlTdHJpbmcgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBxID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTtcdC8v6I635Y+W5p+l6K+i5a2X56ym5LiyXHJcbiAgICAgICAgdmFyIGEgPSBxLnNwbGl0KFwiJlwiKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhhKTtcclxuICAgICAgICB2YXIgbyA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKXtcclxuICAgICAgICAgICAgdmFyIG4gPSBhW2ldLmluZGV4T2YoXCI9XCIpO1xyXG4gICAgICAgICAgICBpZiAobiA9PSAtMSkgY29udGludWU7XHJcbiAgICAgICAgICAgIHZhciB2MSA9IGFbaV0uc3Vic3RyaW5nKDAsIG4pO1xyXG4gICAgICAgICAgICB2YXIgdjIgPSBhW2ldLnN1YnN0cmluZyhuICsgMSk7XHJcbiAgICAgICAgICAgIG9bdjFdID0gdW5lc2NhcGUodjIpO1x0XHRcdFx0Ly/ku6XlkI0v5YC85a+555qE5b2i5byP5a2Y5YKo5Zyo5a+56LGh5LitXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG9bdjFdKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbztcclxuICAgIH07XHJcbiAgICB2YXIgcXMgPSBxdWVyeVN0cmluZygpO1xyXG4gICAgaWYocXMuaGFzT3duUHJvcGVydHkoJ25leHQnKSl7XHJcbiAgICAgICAgc2VsZi5uZXh0ID0gcXNbJ25leHQnXTtcclxuICAgICAgICBzZWxmLnNpZ25Jbi50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMubGlzdGVuU2hvd0hpZGVFdmVudCgpXHJcbiAgICB0aGlzLmxpc3RlblN3aXRjaEV2ZW50KClcclxuICAgIHRoaXMubGlzdGVuU2lnbkluRXZlbnQoKVxyXG4gICAgdGhpcy5saXN0ZW5JbWdDYXB0Y2hhRXZlbnQoKVxyXG4gICAgdGhpcy5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKVxyXG4gICAgdGhpcy5saXN0ZW5TaWduVXBFdmVudCgpXHJcbiAgICB0aGlzLm5lZWRBdXRoKClcclxufTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgYXV0aCA9IG5ldyBBdXRoKClcclxuICAgIGF1dGgucnVuKClcclxufSk7Il19
