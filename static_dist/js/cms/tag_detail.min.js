function EditTag(){}EditTag.prototype.listenSubmitTagEvent=function(d,t){var i=this,a=d.find('input[name="name"]').val(),e=null,n=null,o={name:a};"edit"===t?(o.tag_id=d.attr("data-tag-id"),e="/cms/edit_tag/",n="修改成功"):"add"===t&&(o.category_id=i.categoryId,e="/cms/add_tag/",n="添加成功"),myajax.post({url:e,data:o,success:function(t){if(200===t.code){window.messageBox.showSuccess(n);var a=template("tag-default",{tag:t.data.tag}),e=$($.parseHTML(jQuery.trim(a)));d.replaceWith(e),i.initDefaultNode(e)}}})},EditTag.prototype.listenAddTagEvent=function(){var a=this,e=template("add-tag",{});$(".add-btn").click(function(){a.tbody.hasClass("tag-empty")&&(a.tbody.empty(),a.tbody.removeClass("tag-empty"));var t=$($.parseHTML(jQuery.trim(e)));a.initAddNode(t),a.tbody.prepend(t)})},EditTag.prototype.initDefaultNode=function(i){var n=this;i.find(".edit-btn").click(function(){var t=i.attr("data-tag-id");myajax.post({url:"/cms/get_tag/",data:{tag_id:t},success:function(t){if(200===t.code){var a=t.data.tag,e=template("edit-tag",{tag:a}),d=$($.parseHTML(jQuery.trim(e)));n.initEditNode(d,i),i.replaceWith(d)}}})}),i.find(".delete-btn").click(function(){var t=i.attr("data-tag-id");xfzalert.alertConfirm({text:"确定要删除“"+i.find(".tag").text()+"”标签吗？",confirmButtonText:"删除",confirmCallback:function(){myajax.post({url:"/cms/delete_tag/",data:{tag_id:t},success:function(t){200===t.code&&(xfzalert.alertSuccessToast("删除成功"),0===n.tbody.children().length&&(n.tbody.append("<tr><td><h2>暂无标签</h2></td></tr>"),n.tbody.addClass("tag-empty")),setTimeout(function(){i.remove()},1e3))}})}})})},EditTag.prototype.initAddNode=function(t){var a=this;t.find(".add-cancel").click(function(){t.remove(),0===a.tbody.children().length&&(a.tbody.append("<tr><td><h2>暂无标签</h2></td></tr>"),a.tbody.addClass("tag-empty"))}),t.find(".add-submit").click(function(){a.listenSubmitTagEvent(t,"add")})},EditTag.prototype.initEditNode=function(t,a){var e=this;t.find(".edit-submit").click(function(){e.listenSubmitTagEvent(t,"edit")}),t.find(".edit-cancel").click(function(){e.initDefaultNode(a),t.replaceWith(a)})},EditTag.prototype.loadData=function(){var n=this;myajax.get({url:"/cms/get_tags/?category_id="+n.categoryId,success:function(t){if(200===t.code){for(var a=t.data.tags,e=0;e<a.length;e++){var d=template("tag-default",{tag:a[e]}),i=$($.parseHTML(jQuery.trim(d)));n.initDefaultNode(i),n.tbody.append(i)}0===a.length&&(n.tbody.append("<tr><td><h2>暂无标签</h2></td></tr>"),n.tbody.addClass("tag-empty"))}}})},EditTag.prototype.run=function(){this.tbody=$("tbody"),this.categoryId=this.tbody.attr("data-cate-id"),this.listenAddTagEvent(),this.loadData()},$(function(){(new EditTag).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNtcy90YWdfZGV0YWlsLmpzIl0sIm5hbWVzIjpbIkVkaXRUYWciLCJwcm90b3R5cGUiLCJsaXN0ZW5TdWJtaXRUYWdFdmVudCIsIm5vZGUiLCJ0eXBlIiwic2VsZiIsInRoaXMiLCJuYW1lIiwiZmluZCIsInZhbCIsInVybCIsIm1lc3NhZ2UiLCJkYXRhIiwiYXR0ciIsImNhdGVnb3J5SWQiLCJteWFqYXgiLCJwb3N0Iiwic3VjY2VzcyIsInJlc3VsdCIsIndpbmRvdyIsIm1lc3NhZ2VCb3giLCJzaG93U3VjY2VzcyIsImh0bWwiLCJ0ZW1wbGF0ZSIsInRhZyIsImRlZmF1bHROb2RlIiwiJCIsInBhcnNlSFRNTCIsImpRdWVyeSIsInRyaW0iLCJyZXBsYWNlV2l0aCIsImluaXREZWZhdWx0Tm9kZSIsImxpc3RlbkFkZFRhZ0V2ZW50IiwiY2xpY2siLCJ0Ym9keSIsImhhc0NsYXNzIiwiZW1wdHkiLCJyZW1vdmVDbGFzcyIsImFkZE5vZGUiLCJpbml0QWRkTm9kZSIsInByZXBlbmQiLCJ0YWdJZCIsInRhZ19pZCIsImVkaXROb2RlIiwiaW5pdEVkaXROb2RlIiwieGZ6YWxlcnQiLCJhbGVydENvbmZpcm0iLCJ0ZXh0IiwiY29uZmlybUJ1dHRvblRleHQiLCJjb25maXJtQ2FsbGJhY2siLCJhbGVydFN1Y2Nlc3NUb2FzdCIsImNoaWxkcmVuIiwibGVuZ3RoIiwiYXBwZW5kIiwiYWRkQ2xhc3MiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwib3JpZ2luYWwiLCJsb2FkRGF0YSIsImdldCIsInRhZ3MiLCJpIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxXQUtUQSxRQUFRQyxVQUFVQyxxQkFBdUIsU0FBU0MsRUFBS0MsR0FDbkQsSUFBSUMsRUFBT0MsS0FDUEMsRUFBT0osRUFBS0ssS0FBSyxzQkFBc0JDLE1BQ3ZDQyxFQUFNLEtBQ05DLEVBQVUsS0FDVkMsRUFBUSxDQUNSTCxLQUFRQSxHQUVBLFNBQVRILEdBQ0NRLEVBQWEsT0FBSVQsRUFBS1UsS0FB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QUFXLFdBQ3pCLElBQUlyRCxFQUFPQyxLQUNYUyxPQUFPNEMsSUFBSSxDQUNQakQsSUFBTyw4QkFBZ0NMLEVBQUtTLFdBQzVDRyxRQUFXLFNBQVNDLEdBQ2hCLEdBQXNCLE1BQW5CQSxFQUFhLEtBQVUsQ0FHdEIsSUFEQSxJQUFJMEMsRUFBTzFDLEVBQWEsS0FBUSxLQUN4QjJDLEVBQUUsRUFBRUEsRUFBRUQsRUFBS1IsT0FBT1MsSUFBSSxDQUMxQixJQUFJdkMsRUFBT0MsU0FBUyxjQUFjLENBQUNDLElBQU1vQyxFQUFLQyxLQUMxQ3BDLEVBQWNDLEVBQUVBLEVBQUVDLFVBQVVDLE9BQU9DLEtBQUtQLEtBQzVDakIsRUFBSzBCLGdCQUFnQk4sR0FDckJwQixFQUFLNkIsTUFBTW1CLE9BQU81QixHQUVILElBQWhCbUMsRUFBS1IsU0FDSi9DLEVBQUs2QixNQUFNbUIsT0FBTyxtQ0FDbEJoRCxFQUFLNkIsTUFBTW9CLFNBQVMsbUJBT3hDdEQsUUFBUUMsVUFBVTZELElBQU0sV0FDcEJ4RCxLQUFLNEIsTUFBUVIsRUFBRSxTQUNmcEIsS0FBS1EsV0FBYVIsS0FBSzRCLE1BQU1yQixLQUFLLGdCQUNsQ1AsS0FBSzBCLG9CQUNMMUIsS0FBS29ELFlBR1RoQyxFQUFFLFlBQ2dCLElBQUkxQixTQUNWOEQiLCJmaWxlIjoiY21zL3RhZ19kZXRhaWwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gRWRpdFRhZygpe1xyXG5cclxufVxyXG5cclxuLy8g55uR5ZCs5o+Q5Lqk5qCH562+5LqL5Lu2ICAgIHBhcmFtczogIG5vZGU6IOimgeaPkOS6pOeahHRy5qCH562+6IqC54K5LCAgdHlwZTogJ2FkZCcgb3IgJ2VkaXQnXHJcbkVkaXRUYWcucHJvdG90eXBlLmxpc3RlblN1Ym1pdFRhZ0V2ZW50ID0gZnVuY3Rpb24obm9kZSx0eXBlKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBuYW1lID0gbm9kZS5maW5kKCdpbnB1dFtuYW1lPVwibmFtZVwiXScpLnZhbCgpO1xyXG4gICAgdmFyIHVybCA9IG51bGw7XHJcbiAgICB2YXIgbWVzc2FnZSA9IG51bGw7XHJcbiAgICB2YXIgZGF0YSA9ICB7XHJcbiAgICAgICAgJ25hbWUnOiBuYW1lLFxyXG4gICAgfTtcclxuICAgIGlmKHR5cGUgPT09ICdlZGl0Jyl7XHJcbiAgICAgICAgZGF0YVsndGFnX2lkJ10gPSBub2RlLmF0dHIoJ2RhdGEtdGFnLWlkJyk7XHJcbiAgICAgICAgdXJsID0gJy9jbXMvZWRpdF90YWcvJztcclxuICAgICAgICBtZXNzYWdlID0gJ+S/ruaUueaIkOWKnyc7XHJcbiAgICB9IGVsc2UgaWYodHlwZSA9PT0gJ2FkZCcpe1xyXG4gICAgICAgIGRhdGFbJ2NhdGVnb3J5X2lkJ10gPSBzZWxmLmNhdGVnb3J5SWQ7XHJcbiAgICAgICAgdXJsID0gJy9jbXMvYWRkX3RhZy8nO1xyXG4gICAgICAgIG1lc3NhZ2UgPSAn5re75Yqg5oiQ5YqfJztcclxuICAgIH1cclxuICAgIG15YWpheC5wb3N0KHtcclxuICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICdkYXRhJzogZGF0YSxcclxuICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgIC8vIOaPkOS6pOaIkOWKn+WQjuWwhue8lui+keeKtuaAgeaUueS4uum7mOiupOeKtuaAge+8jOW5tuWIneWni+WMluiKgueCuVxyXG4gICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGh0bWwgPSB0ZW1wbGF0ZSgndGFnLWRlZmF1bHQnLHsndGFnJzpyZXN1bHRbJ2RhdGEnXVsndGFnJ119KTtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0Tm9kZSA9ICQoJC5wYXJzZUhUTUwoalF1ZXJ5LnRyaW0oaHRtbCkpKTsgLy8gaHRtbCA+PiBkb20gPj4ganF1ZXJ5XHJcbiAgICAgICAgICAgICAgICBub2RlLnJlcGxhY2VXaXRoKGRlZmF1bHROb2RlKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5pdERlZmF1bHROb2RlKGRlZmF1bHROb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn07XHJcblxyXG4vLyDnm5HlkKzmt7vliqDmoIfnrb7kuovku7ZcclxuRWRpdFRhZy5wcm90b3R5cGUubGlzdGVuQWRkVGFnRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGh0bWwgPSB0ZW1wbGF0ZSgnYWRkLXRhZycse30pO1xyXG4gICAgJCgnLmFkZC1idG4nKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vIOWmguaenOS5i+WJjeS4uuepuu+8jOWImeWPlua2iOKAmOaaguaXoOagh+etvuKAmeaWh+acrFxyXG4gICAgICAgIGlmKHNlbGYudGJvZHkuaGFzQ2xhc3MoJ3RhZy1lbXB0eScpKXtcclxuICAgICAgICAgICAgc2VsZi50Ym9keS5lbXB0eSgpO1xyXG4gICAgICAgICAgICBzZWxmLnRib2R5LnJlbW92ZUNsYXNzKCd0YWctZW1wdHknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5Yid5aeL5YyW4oCY5re75Yqg6IqC54K54oCZ77yMIOW5tua3u+WKoOWIsOeItuiKgueCueeahOWtkOWFg+e0oOeahOacgOWJjemdolxyXG4gICAgICAgIHZhciBhZGROb2RlID0gJCgkLnBhcnNlSFRNTChqUXVlcnkudHJpbShodG1sKSkpO1xyXG4gICAgICAgIHNlbGYuaW5pdEFkZE5vZGUoYWRkTm9kZSk7XHJcbiAgICAgICAgc2VsZi50Ym9keS5wcmVwZW5kKGFkZE5vZGUpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyDnm5HlkKznvJbovpHmoIfnrb7kuovku7ZcclxuLy8g5Yid5aeL5YyW4oCZ6buY6K6k6IqC54K54oCY5pe25bey57uP57uR5a6a57yW6L6R5LqL5Lu2XHJcblxyXG4vLyDliJ3lp4vljJbigJjpu5jorqToioLngrnigJlcclxuRWRpdFRhZy5wcm90b3R5cGUuaW5pdERlZmF1bHROb2RlID0gZnVuY3Rpb24obm9kZSl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvLyDnm5HlkKznvJbovpHkuovku7ZcclxuICAgIG5vZGUuZmluZCgnLmVkaXQtYnRuJykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgdGFnSWQgPSBub2RlLmF0dHIoJ2RhdGEtdGFnLWlkJyk7XHJcbiAgICAgICAgbXlhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzonL2Ntcy9nZXRfdGFnLycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAndGFnX2lkJzp0YWdJZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcmVzdWx0WydkYXRhJ11bJ3RhZyddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gdGVtcGxhdGUoJ2VkaXQtdGFnJyx7J3RhZyc6dGFnfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVkaXROb2RlID0gJCgkLnBhcnNlSFRNTChqUXVlcnkudHJpbShodG1sKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5pdEVkaXROb2RlKGVkaXROb2RlLCBub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDkuIDml6blj5HnlJ/mm7/mjaLvvIzljp/lhYPntKDmiYDlhbflpIfnmoTkuovku7bpg73lsIbmtojlpLHjgIJcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnJlcGxhY2VXaXRoKGVkaXROb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvLyDnm5HlkKzliKDpmaTkuovku7ZcclxuICAgIG5vZGUuZmluZCgnLmRlbGV0ZS1idG4nKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciB0YWdJZCA9IG5vZGUuYXR0cignZGF0YS10YWctaWQnKTtcclxuICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAndGV4dCc6ICfnoa7lrpropoHliKDpmaTigJwnICsgbm9kZS5maW5kKCcudGFnJykudGV4dCgpICsgJ+KAneagh+etvuWQl++8nycsXHJcbiAgICAgICAgICAgICdjb25maXJtQnV0dG9uVGV4dCc6ICfliKDpmaQnLFxyXG4gICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIG15YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9jbXMvZGVsZXRlX3RhZy8nLFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndGFnX2lkJzogdGFnSWRcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24ocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3NUb2FzdCgn5Yig6Zmk5oiQ5YqfJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZWxmLnRib2R5LmNoaWxkcmVuKCkubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRib2R5LmFwcGVuZChcIjx0cj48dGQ+PGgyPuaaguaXoOagh+etvjwvaDI+PC90ZD48L3RyPlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRib2R5LmFkZENsYXNzKCd0YWctZW1wdHknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwxMDAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pXHJcbn07XHJcblxyXG4vLyDliJ3lp4vljJbigJjmlrDlu7roioLngrnigJlcclxuRWRpdFRhZy5wcm90b3R5cGUuaW5pdEFkZE5vZGUgPSBmdW5jdGlvbihub2RlKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIC8vIOe7keWumuWPlua2iOS6i+S7tlxyXG4gICAgbm9kZS5maW5kKCcuYWRkLWNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbm9kZS5yZW1vdmUoKTtcclxuICAgICAgICBpZihzZWxmLnRib2R5LmNoaWxkcmVuKCkubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgc2VsZi50Ym9keS5hcHBlbmQoXCI8dHI+PHRkPjxoMj7mmoLml6DmoIfnrb48L2gyPjwvdGQ+PC90cj5cIik7XHJcbiAgICAgICAgICAgIHNlbGYudGJvZHkuYWRkQ2xhc3MoJ3RhZy1lbXB0eScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8g57uR5a6a5L+d5a2Y5LqL5Lu2XHJcbiAgICBub2RlLmZpbmQoJy5hZGQtc3VibWl0JykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICBzZWxmLmxpc3RlblN1Ym1pdFRhZ0V2ZW50KG5vZGUsJ2FkZCcpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyDliJ3lp4vljJbigJjnvJbovpHoioLngrnigJkgIHBhcmFtczogbm9kZTog57yW6L6R6IqC54K5LCAgb3JpZ2luYWw6IOeCueWHu+WPlua2iOWQjuaYvuekuueahOWOn+Wni+iKgueCuVxyXG5FZGl0VGFnLnByb3RvdHlwZS5pbml0RWRpdE5vZGUgPSBmdW5jdGlvbihub2RlLCBvcmlnaW5hbCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvLyDnu5Hlrprkv53lrZjkuovku7ZcclxuICAgIG5vZGUuZmluZCgnLmVkaXQtc3VibWl0JykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICBzZWxmLmxpc3RlblN1Ym1pdFRhZ0V2ZW50KG5vZGUsJ2VkaXQnKTtcclxuICAgIH0pO1xyXG4gICAgLy8g57uR5a6a5Y+W5raI5LqL5Lu2XHJcbiAgICBub2RlLmZpbmQoJy5lZGl0LWNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgc2VsZi5pbml0RGVmYXVsdE5vZGUob3JpZ2luYWwpO1xyXG4gICAgICAgIG5vZGUucmVwbGFjZVdpdGgob3JpZ2luYWwpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuLy8g5byC5q2l5Yqg6L295qCH562+XHJcbkVkaXRUYWcucHJvdG90eXBlLmxvYWREYXRhID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIG15YWpheC5nZXQoe1xyXG4gICAgICAgICd1cmwnOiAnL2Ntcy9nZXRfdGFncy8/Y2F0ZWdvcnlfaWQ9JyArIHNlbGYuY2F0ZWdvcnlJZCxcclxuICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCl7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgLy8g5Yid5aeL5YyW6IqC54K55bm25re75Yqg5Yiw54i26IqC54K5XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFncyA9IHJlc3VsdFsnZGF0YSddWyd0YWdzJ107XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDtpPHRhZ3MubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSB0ZW1wbGF0ZSgndGFnLWRlZmF1bHQnLHsndGFnJzp0YWdzW2ldfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHROb2RlID0gJCgkLnBhcnNlSFRNTChqUXVlcnkudHJpbShodG1sKSkpOyAgLy8g5Y675o6J56m65qC8IOi9rOS4umpxdWVyeeWvueixoVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5pdERlZmF1bHROb2RlKGRlZmF1bHROb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnRib2R5LmFwcGVuZChkZWZhdWx0Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZih0YWdzLmxlbmd0aCA9PT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50Ym9keS5hcHBlbmQoXCI8dHI+PHRkPjxoMj7mmoLml6DmoIfnrb48L2gyPjwvdGQ+PC90cj5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50Ym9keS5hZGRDbGFzcygndGFnLWVtcHR5Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkVkaXRUYWcucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCl7XHJcbiAgICB0aGlzLnRib2R5ID0gJCgndGJvZHknKTtcclxuICAgIHRoaXMuY2F0ZWdvcnlJZCA9IHRoaXMudGJvZHkuYXR0cignZGF0YS1jYXRlLWlkJyk7XHJcbiAgICB0aGlzLmxpc3RlbkFkZFRhZ0V2ZW50KCk7XHJcbiAgICB0aGlzLmxvYWREYXRhKCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgZWRpdFRhZyA9IG5ldyBFZGl0VGFnKCk7XHJcbiAgICBlZGl0VGFnLnJ1bigpO1xyXG59KTsiXX0=
